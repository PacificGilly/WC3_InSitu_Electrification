
; PICBASIC PRO(TM) Compiler 3.0.6.4, (c) 1998, 2012 microEngineering Labs, Inc. All Rights Reserved. 
MPASMWIN_USED			EQU	1

#define	PBP_PATH	C:\PBP3\




        NOLIST
    ifdef PM_USED
        LIST
        include 'M16F688.INC'	; PM header
        XALL
        NOLIST
    else
        LIST
        LIST p = 16F688, r = dec, w = -302
        INCLUDE "P16F688.INC"	; MPASM  Header
        NOLIST
    endif
        LIST


PBP_HARDWAREDEF  macro
  endm


      __config _INTRC_OSC_NOCLKOUT & _MCLRE_OFF



; Define statements.
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00144	DEFINE  CODE_SIZE 4
#define		CODE_SIZE		 4
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00040	DEFINE I2C_HOLD 1
#define		I2C_HOLD		 1
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00042	DEFINE CHAR_PACING  1000
#define		CHAR_PACING		  1000

RAM_START       		EQU	00020h
RAM_END         		EQU	0016Fh
RAM_BANKS       		EQU	00003h
BANK0_START     		EQU	00020h
BANK0_END       		EQU	0007Fh
BANK1_START     		EQU	000A0h
BANK1_END       		EQU	000EFh
BANK2_START     		EQU	00120h
BANK2_END       		EQU	0016Fh
EEPROM_START    		EQU	02100h
EEPROM_END      		EQU	021FFh

; C:\PBP3\PBPPIC14.RAM     	00012	A00020	R0      VAR     WORD BANK0 SYSTEM       ' System Register
R0              		EQU	RAM_START + 000h
; C:\PBP3\PBPPIC14.RAM     	00013	A00022	R1      VAR     WORD BANK0 SYSTEM       ' System Register
R1              		EQU	RAM_START + 002h
; C:\PBP3\PBPPIC14.RAM     	00014	A00024	R2      VAR     WORD BANK0 SYSTEM       ' System Register
R2              		EQU	RAM_START + 004h
; C:\PBP3\PBPPIC14.RAM     	00015	A00026	R3      VAR     WORD BANK0 SYSTEM       ' System Register
R3              		EQU	RAM_START + 006h
; C:\PBP3\PBPPIC14.RAM     	00016	A00028	R4      VAR     WORD BANK0 SYSTEM       ' System Register
R4              		EQU	RAM_START + 008h
; C:\PBP3\PBPPIC14.RAM     	00017	A0002A	R5      VAR     WORD BANK0 SYSTEM       ' System Register
R5              		EQU	RAM_START + 00Ah
; C:\PBP3\PBPPIC14.RAM     	00018	A0002C	R6      VAR     WORD BANK0 SYSTEM       ' System Register
R6              		EQU	RAM_START + 00Ch
; C:\PBP3\PBPPIC14.RAM     	00019	A0002E	R7      VAR     WORD BANK0 SYSTEM       ' System Register
R7              		EQU	RAM_START + 00Eh
; C:\PBP3\PBPPIC14.RAM     	00020	A00030	R8      VAR     WORD BANK0 SYSTEM       ' System Register
R8              		EQU	RAM_START + 010h
; C:\PBP3\PBPPIC14.RAM     	00026	A00032	FLAGS   VAR     BYTE BANK0 SYSTEM       ' Static flags
FLAGS           		EQU	RAM_START + 012h
; C:\PBP3\PBPPIC14.RAM     	00025	A00033	GOP     VAR     BYTE BANK0 SYSTEM       ' Gen Op Parameter
GOP             		EQU	RAM_START + 013h
; C:\PBP3\PBPPIC14.RAM     	00022	A00034	RM1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Mask
RM1             		EQU	RAM_START + 014h
; C:\PBP3\PBPPIC14.RAM     	00024	A00035	RM2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Mask
RM2             		EQU	RAM_START + 015h
; C:\PBP3\PBPPIC14.RAM     	00021	A00036	RR1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Register
RR1             		EQU	RAM_START + 016h
; C:\PBP3\PBPPIC14.RAM     	00023	A00037	RR2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Register
RR2             		EQU	RAM_START + 017h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00107	A00038	I2Cdataw             var   word[5]           'array of 5 words for I2Cdataw
_I2Cdataw        		EQU	RAM_START + 018h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00154	A00042	ADR         VAR word        ' ADC conversion result
_ADR             		EQU	RAM_START + 022h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00134	A00044	Ch0res	     VAR word
_Ch0res          		EQU	RAM_START + 024h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00135	A00046	Ch1res	     VAR word
_Ch1res          		EQU	RAM_START + 026h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00136	A00048	Ch2res 	     VAR word
_Ch2res          		EQU	RAM_START + 028h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00137	A0004A	Ch3res 	     VAR word
_Ch3res          		EQU	RAM_START + 02Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00138	A0004C	Ch4res 	     VAR word
_Ch4res          		EQU	RAM_START + 02Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00001	A0004E	' Program: PANDORA3
T1              		EQU	RAM_START + 02Eh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00001	A00050	' Program: PANDORA3
T2              		EQU	RAM_START + 030h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00001	A00052	' Program: PANDORA3
T3              		EQU	RAM_START + 032h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00001	A00054	' Program: PANDORA3
T4              		EQU	RAM_START + 034h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00140	A00056	Word1 var word
_Word1           		EQU	RAM_START + 036h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00141	A00058	Word2 var word
_Word2           		EQU	RAM_START + 038h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00142	A0005A	Word3 var word
_Word3           		EQU	RAM_START + 03Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00143	A0005C	Word4 var word
_Word4           		EQU	RAM_START + 03Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00152	A0005E	Wtemp       var word        ' general purpose word
_Wtemp           		EQU	RAM_START + 03Eh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00150	A00060	counter     var byte
_counter         		EQU	RAM_START + 040h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00144	A00061	d0 var byte
_d0              		EQU	RAM_START + 041h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00145	A00062	d1 var byte
_d1              		EQU	RAM_START + 042h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00146	A00063	d2 var byte
_d2              		EQU	RAM_START + 043h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00147	A00064	d3 var byte
_d3              		EQU	RAM_START + 044h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00148	A00065	d4 var byte
_d4              		EQU	RAM_START + 045h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00111	A00066	I2C_STATUS           var   byte
_I2C_STATUS      		EQU	RAM_START + 046h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00109	A00067	I2Cnumreadbytes      var   byte
_I2Cnumreadbytes 		EQU	RAM_START + 047h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00110	A00068	I2CslaveAddress      var   byte
_I2CslaveAddress 		EQU	RAM_START + 048h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00153	A00069	j           var Byte
_j               		EQU	RAM_START + 049h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00151	A0006A	N           var byte        ' number of repeated 10bit AD reads
_N               		EQU	RAM_START + 04Ah
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00145	PORTL   VAR     PORTA
_PORTL           		EQU	 PORTA
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00146	PORTH   VAR     PORTC
_PORTH           		EQU	 PORTC
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00147	TRISL   VAR     TRISA
_TRISL           		EQU	 TRISA
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00148	TRISH   VAR     TRISC
_TRISH           		EQU	 TRISC
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00108	I2Cdata              var   I2Cdataw.byte0    'access same array as both words and bytes
_I2Cdata         		EQU	_I2Cdataw
_I2Cdataw??BYTE0 		EQU	_I2Cdataw
_ADR??HIGHBYTE   		EQU	_ADR + 001h
_ADR??LOWBYTE    		EQU	_ADR
#define _MUX1            	_PORTA??3
#define _Data_Out        	_PORTA??2
#define _Shift_Out       	_PORTC??2
#define _I2C_DATA_PIN    	_PORTC??5
#define _I2C_DATA_TRIS   	_TRISC??5
#define _I2C_CLOCK_PIN   	_PORTC??4
#define _I2C_CLOCK_TRIS  	_TRISC??4
#define _I2C_STATUS_TIMEOUT	_I2C_STATUS??0
#define _I2C_STATUS_DONE 	_I2C_STATUS??1
#define _SO              	_PORTA??5
#define _TRISA??3        	 TRISA, 003h
#define _ANSEL??6        	 ANSEL, 006h
#define _TRISC??2        	 TRISC, 002h
#define _TRISA??2        	 TRISA, 002h
#define _PORTA??3        	 PORTA, 003h
#define _PORTA??2        	 PORTA, 002h
#define _PORTC??2        	 PORTC, 002h
#define _ADCON0??0       	 ADCON0, 000h
#define _ADCON1??6       	 ADCON1, 006h
#define _ADCON1??5       	 ADCON1, 005h
#define _ADCON1??4       	 ADCON1, 004h
#define _ADCON0??6       	 ADCON0, 006h
#define _ADCON0??7       	 ADCON0, 007h
#define _CMCON0??0       	 CMCON0, 000h
#define _CMCON0??1       	 CMCON0, 001h
#define _CMCON0??2       	 CMCON0, 002h
#define _TRISA??0        	 TRISA, 000h
#define _ANSEL??0        	 ANSEL, 000h
#define _TRISA??1        	 TRISA, 001h
#define _ANSEL??1        	 ANSEL, 001h
#define _TRISC??3        	 TRISC, 003h
#define _ANSEL??7        	 ANSEL, 007h
#define _TRISA??4        	 TRISA, 004h
#define _ANSEL??3        	 ANSEL, 003h
#define _TRISC??0        	 TRISC, 000h
#define _ANSEL??4        	 ANSEL, 004h
#define _PORTC??5        	 PORTC, 005h
#define _TRISC??5        	 TRISC, 005h
#define _PORTC??4        	 PORTC, 004h
#define _TRISC??4        	 TRISC, 004h
#define _I2C_STATUS??0   	_I2C_STATUS, 000h
#define _I2C_STATUS??1   	_I2C_STATUS, 001h
#define _TRISA??5        	 TRISA, 005h
#define _PORTA??5        	 PORTA, 005h
#define _ADCON0??4       	 ADCON0, 004h
#define _ADCON0??3       	 ADCON0, 003h
#define _ADCON0??2       	 ADCON0, 002h
#define _ADCON0??1       	 ADCON0, 001h

; Constants.
_I2COMB          		EQU	00003h
_I2CSO2          		EQU	00005h
_I2CACC          		EQU	00007h
_I2CCHA          		EQU	00009h
_I2CGEI          		EQU	0000Bh
_I2CCLO          		EQU	0000Dh
_I2COXF          		EQU	0000Fh
	INCLUDE	"PANDORA_180302.MAC"
	INCLUDE	"C:\PBP3\PBPPIC14.LIB"


; C:\PBP3\DEVICES\PIC16F688.PBPINC	00036	#HEADER
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00061	#CONFIG
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00135	BANK0   $0020, $007F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00136	BANK1   $00A0, $00EF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00137	BANK2   $0120, $016F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00139	EEPROM  $2100, $21FF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00141	    #ERROR "-n option (PBPL) is not supported for this device."
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00142	#ENDIF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00143	LIBRARY "PBPPIC14"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00144	DEFINE  CODE_SIZE 4

; C:\PBP3\DEVICES\PIC16F688.PBPINC	00149	include "PBPPIC14.RAM"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00153	#HEADER
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00034	#CONFIG
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00040	DEFINE I2C_HOLD 1
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00042	DEFINE CHAR_PACING  1000

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00047	TRISA.3=1         ' set RA3 as an input [MUX1]
	MOVE?CT	001h, _TRISA??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00049	ANSEL.6=0          'make RC2 a digital i/o (rather than AN6 input)
	MOVE?CT	000h, _ANSEL??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00050	TRISC.2=0         ' set RC2 as an output [ShiftOut]
	MOVE?CT	000h, _TRISC??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00052	TRISA.2=0         ' set RA2 as an output [DataOut]
	MOVE?CT	000h, _TRISA??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00064	ADCON0.0=1          ' internal AtoD on
	MOVE?CT	001h, _ADCON0??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00066	ADCON1.6=1          ' set AtoD clock time to Fosc/16 (101 on bits 6,5,6)
	MOVE?CT	001h, _ADCON1??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00067	ADCON1.5=0
	MOVE?CT	000h, _ADCON1??5

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00068	ADCON1.4=1
	MOVE?CT	001h, _ADCON1??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00070	ADCON0.6=0          ' use VDD supply as AtoD reference voltage
	MOVE?CT	000h, _ADCON0??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00071	ADCON0.7=1          ' right justified
	MOVE?CT	001h, _ADCON0??7

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00075	CMCON0.0=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00076	CMCON0.1=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00077	CMCON0.2=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00080	TRISA.0=1           ' make RA0 operate as an input
	MOVE?CT	001h, _TRISA??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00081	ANSEL.0=1           ' select analogue input mode
	MOVE?CT	001h, _ANSEL??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00083	TRISA.1=1           ' make RA1 operate as an input
	MOVE?CT	001h, _TRISA??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00084	ANSEL.1=1           ' select analogue input mode
	MOVE?CT	001h, _ANSEL??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00086	TRISC.3=1           ' make RC3 operate as an input
	MOVE?CT	001h, _TRISC??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00087	ANSEL.7=1
	MOVE?CT	001h, _ANSEL??7

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00089	TRISA.4=1           ' make RA4 operate as an input
	MOVE?CT	001h, _TRISA??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00090	ANSEL.3=1
	MOVE?CT	001h, _ANSEL??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00092	TRISC.0=1           ' make RC0 operate as an input...in case it's connected
	MOVE?CT	001h, _TRISC??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00093	ANSEL.4=1
	MOVE?CT	001h, _ANSEL??4
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00115	I2COMB con 3         ' OMB address = 3      In Arduino code = 3
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00116	I2CSO2 con 5         ' SO2 address = 5      In slave code = 11
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00117	I2CACC con 7         ' ACC address = 7      In slave code = 15
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00118	I2CCHA con 9         ' CHA address = 9      In slave code = 19
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00119	I2CGEI con 11        ' GEI address = 11     In slave code = 23
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00120	I2CCLO con 13        ' CLO address = 13     In slave code = 27
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00121	I2COXF con 15        ' OXF address = 15     In slave code = 31

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00127	TRISA.5=0           ' make RA5 a (digital) output
	MOVE?CT	000h, _TRISA??5

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00159	HIGH SO
	HIGH?T	_SO

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00160	low Shift_out		' Output initially low
	LOW?T	_Shift_Out

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00161	pause 1000	        ' Allow for power up
	PAUSE?C	003E8h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00163	COUNTER=1
	MOVE?CB	001h, _counter

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00165	Again:			' Main loop.

	LABEL?L	_Again	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00168	scan:	If MUX1 = 0 then go

	LABEL?L	_scan	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00168	scan:	If MUX1 = 0 then go
	CMPEQ?TCL	_MUX1, 000h, _go

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00169		Pause 5			' Pulse width of MUX1 is nominally 8ms so wait 5ms
	PAUSE?C	005h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00170		goto scan		' to detect beginning of pulse
	GOTO?L	_scan

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00171	go:	pause 18		' Wait 18ms. Total synch period of 18ms completed

	LABEL?L	_go	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00171	go:	pause 18		' Wait 18ms. Total synch period of 18ms completed
	PAUSE?C	012h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00173	pause 200   'this wait is needed for launches - reduce if more code executed (when synced with radiosonde)
	PAUSE?C	0C8h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00176	N=16
	MOVE?CB	010h, _N

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00178	ADCON0.4=0          ' select channel AN0 (000 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00179	ADCON0.3=0
	MOVE?CT	000h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00180	ADCON0.2=0
	MOVE?CT	000h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00181	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00182	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00183	Ch0res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00185	ADCON0.4=0          ' select channel AN1 (001 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00186	ADCON0.3=0
	MOVE?CT	000h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00187	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00188	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00189	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00190	Ch1res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00192	ADCON0.4=1          ' select channel AN7 (111 on bits 4,3,2)  
	MOVE?CT	001h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00193	ADCON0.3=1
	MOVE?CT	001h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00194	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00195	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00196	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00197	Ch2res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch2res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00199	ADCON0.4=0          ' select channel AN3 (011 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00200	ADCON0.3=1
	MOVE?CT	001h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00201	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00202	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00203	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00204	Ch3res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch3res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00207	if counter = 1 then
	CMPNE?BCL	_counter, 001h, L00001

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00208	I2CslaveAddress = I2CCHA ' [LIN : LOG : CY : IR : 1111]
	MOVE?CB	_I2CCHA, _I2CslaveAddress

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00209	I2Cnumreadbytes = 4
	MOVE?CB	004h, _I2Cnumreadbytes
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00210	gosub SLOW_I2CREAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00211	if I2C_STATUS_DONE = 1 then
	CMPNE?TCL	_I2C_STATUS_DONE, 001h, L00003

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00213	   Ch0res= 256*I2Cdata[0] + I2Cdata[1]     'big endian data
	MUL?CBW	00100h, _I2Cdata, T1
	ADD?WBW	T1, _I2Cdata + 00001h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00214	   Ch1res= 256*I2Cdata[2] + I2Cdata[3]
	MUL?CBW	00100h, _I2Cdata + 00002h, T1
	ADD?WBW	T1, _I2Cdata + 00003h, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00216	endif
	LABEL?L	L00003	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00218	   Ch4res= 1111
	MOVE?CW	00457h, _Ch4res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00220	   Ch0res= Ch0res/16    ' reduce to 12 bit
	DIV?WCW	_Ch0res, 010h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00221	   Ch1res= Ch1res/16    ' reduce to 12 bit 
	DIV?WCW	_Ch1res, 010h, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00225	endif
	LABEL?L	L00001	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00228	if counter = 2 then
	CMPNE?BCL	_counter, 002h, L00005

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00230	I2CslaveAddress = I2CCHA ' [LIN : SD : PLL : IR : 1111]
	MOVE?CB	_I2CCHA, _I2CslaveAddress

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00231	I2Cnumreadbytes = 4
	MOVE?CB	004h, _I2Cnumreadbytes
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00232	gosub SLOW_I2CREAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00233	if I2C_STATUS_DONE = 1 then
	CMPNE?TCL	_I2C_STATUS_DONE, 001h, L00007

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00235	   Ch0res= 256*I2Cdata[0] + I2Cdata[1]     'big endian data
	MUL?CBW	00100h, _I2Cdata, T1
	ADD?WBW	T1, _I2Cdata + 00001h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00237	endif
	LABEL?L	L00007	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00239	I2CslaveAddress = I2CACC
	MOVE?CB	_I2CACC, _I2CslaveAddress

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00240	I2Cnumreadbytes = 8
	MOVE?CB	008h, _I2Cnumreadbytes
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00241	gosub SLOW_I2CREAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00242	if I2C_STATUS_DONE = 1 then
	CMPNE?TCL	_I2C_STATUS_DONE, 001h, L00009

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00244	   Ch1res= 256*I2Cdata[2] + I2Cdata[3]
	MUL?CBW	00100h, _I2Cdata + 00002h, T1
	ADD?WBW	T1, _I2Cdata + 00003h, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00246	endif
	LABEL?L	L00009	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00248	I2CslaveAddress = I2COMB
	MOVE?CB	_I2COMB, _I2CslaveAddress

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00249	I2Cnumreadbytes = 8
	MOVE?CB	008h, _I2Cnumreadbytes
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00250	gosub SLOW_I2CREAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00251	if I2C_STATUS_DONE = 1 then
	CMPNE?TCL	_I2C_STATUS_DONE, 001h, L00011

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00253	   Ch2res= 256*I2Cdata[4] + I2Cdata[5]
	MUL?CBW	00100h, _I2Cdata + 00004h, T1
	ADD?WBW	T1, _I2Cdata + 00005h, _Ch2res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00255	endif
	LABEL?L	L00011	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00257	   Ch4res= 1112
	MOVE?CW	00458h, _Ch4res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00259	   Ch0res= Ch0res/16    ' reduce to 12 bit
	DIV?WCW	_Ch0res, 010h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00261	   counter=0
	MOVE?CB	000h, _counter

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00263	endif
	LABEL?L	L00005	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00266	COUNTER=COUNTER+1   ' ready for next loop
	ADD?BCB	_counter, 001h, _counter

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00268	Ch4Res=Ch4Res+1000
	ADD?WCW	_Ch4res, 003E8h, _Ch4res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00273	d4=ch0res dig 3
	DIG?WCB	_Ch0res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00274	d3=ch0res dig 2
	DIG?WCB	_Ch0res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00275	d2=ch0res dig 1
	DIG?WCB	_Ch0res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00276	d1=ch0res dig 0
	DIG?WCB	_Ch0res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00277	d0=ch4res dig 3
	DIG?WCB	_Ch4res, 003h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00278	Word1=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00281	d4=ch1res dig 3
	DIG?WCB	_Ch1res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00282	d3=ch1res dig 2
	DIG?WCB	_Ch1res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00283	d2=ch1res dig 1
	DIG?WCB	_Ch1res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00284	d1=ch1res dig 0
	DIG?WCB	_Ch1res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00285	d0=ch4res dig 2
	DIG?WCB	_Ch4res, 002h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00286	Word2=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00289	d4=ch2res dig 3
	DIG?WCB	_Ch2res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00290	d3=ch2res dig 2
	DIG?WCB	_Ch2res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00291	d2=ch2res dig 1
	DIG?WCB	_Ch2res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00292	d1=ch2res dig 0
	DIG?WCB	_Ch2res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00293	d0=ch4res dig 1
	DIG?WCB	_Ch4res, 001h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00294	Word3=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00297	d4=ch3res dig 3
	DIG?WCB	_Ch3res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00298	d3=ch3res dig 2
	DIG?WCB	_Ch3res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00299	d2=ch3res dig 1
	DIG?WCB	_Ch3res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00300	d1=ch3res dig 0
	DIG?WCB	_Ch3res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00301	d0=ch4res dig 0
	DIG?WCB	_Ch4res, 000h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00302	Word4=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00307	Shiftout data_out, shift_out, 1,[Word1\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word1, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00308	Shiftout data_out, shift_out, 1,[Word2\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word2, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00309	Shiftout data_out, shift_out, 1,[Word3\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word3, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00310	Shiftout data_out, shift_out, 1,[Word4\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word4, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00316	serout SO,2,["UU ",#Ch0res,", ",#Ch1res,", ",#Ch2res,", ",#Ch3res,", ",#Ch4res,10]
	SERPIN?T	_SO
	SERMODE?C	002h
	SEROUT?C	055h
	SEROUT?C	055h
	SEROUT?C	020h
	SEROUTD?W	_Ch0res
	SEROUT?C	02Ch
	SEROUT?C	020h
	SEROUTD?W	_Ch1res
	SEROUT?C	02Ch
	SEROUT?C	020h
	SEROUTD?W	_Ch2res
	SEROUT?C	02Ch
	SEROUT?C	020h
	SEROUTD?W	_Ch3res
	SEROUT?C	02Ch
	SEROUT?C	020h
	SEROUTD?W	_Ch4res
	SEROUT?C	00Ah

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00319	goto again		    ' repeat ad infinitum
	GOTO?L	_Again

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00328	RepeatAD:

	LABEL?L	_RepeatAD	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00329	Wtemp=0
	MOVE?CW	000h, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00330	    GOSUB ReadAD        ' dummy read
	GOSUB?L	_ReadAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00331	for j=1 to N
	MOVE?CB	001h, _j
	LABEL?L	L00013	
	CMPGT?BBL	_j, _N, L00014

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00332	    GOSUB ReadAD        ' read AtoD
	GOSUB?L	_ReadAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00333	    Wtemp=Wtemp+ADR     ' sum up values obtained
	ADD?WWW	_Wtemp, _ADR, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00334	    next j
	NEXT?BCL	_j, 001h, L00013
	LABEL?L	L00014	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00335	ADR=Wtemp
	MOVE?WW	_Wtemp, _ADR

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00336	return
	RETURN?	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00344	ReadAD:                         ' subroutine to read ADC for SELECTED channel

	LABEL?L	_ReadAD	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00346	    ADR=0
	MOVE?CW	000h, _ADR

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00347	    ADCON0.1=1                  ' starts conversion
	MOVE?CT	001h, _ADCON0??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00349	    while ADCON0.1=1: WEND
	LABEL?L	L00015	
	CMPNE?TCL	_ADCON0??1, 001h, L00016

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00349	    while ADCON0.1=1: WEND
	GOTO?L	L00015
	LABEL?L	L00016	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00351	    ADR.highbyte = ADRESH       ' transfer low and high bytes to ADR
	MOVE?BB	ADRESH, _ADR??HIGHBYTE

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00352	    ADR.LOWBYTE = ADRESL
	MOVE?BB	ADRESL, _ADR??LOWBYTE

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00353	RETURN
	RETURN?	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION2\PANDORA_180302.PBP	00356	INCLUDE "MasterSlowI2CreadNoTimeout.pbp"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00036	#HEADER
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00061	#CONFIG
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00135	BANK0   $0020, $007F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00136	BANK1   $00A0, $00EF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00137	BANK2   $0120, $016F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00139	EEPROM  $2100, $21FF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00141	    #ERROR "-n option (PBPL) is not supported for this device."
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00142	#ENDIF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00143	LIBRARY "PBPPIC14"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00144	DEFINE  CODE_SIZE 4

; C:\PBP3\DEVICES\PIC16F688.PBPINC	00149	include "PBPPIC14.RAM"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00153	#HEADER

	END
