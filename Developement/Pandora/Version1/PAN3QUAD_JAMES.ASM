
; PICBASIC PRO(TM) Compiler 3.0.6.4, (c) 1998, 2012 microEngineering Labs, Inc. All Rights Reserved. 
MPASMWIN_USED			EQU	1

#define	PBP_PATH	C:\PBP3\




        NOLIST
    ifdef PM_USED
        LIST
        include 'M16F688.INC'	; PM header
        XALL
        NOLIST
    else
        LIST
        LIST p = 16F688, r = dec, w = -302
        INCLUDE "P16F688.INC"	; MPASM  Header
        NOLIST
    endif
        LIST


PBP_HARDWAREDEF  macro
  endm


      __config _INTRC_OSC_NOCLKOUT & _MCLRE_OFF



; Define statements.
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00144	DEFINE  CODE_SIZE 4
#define		CODE_SIZE		 4
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00034	DEFINE I2C_HOLD 1
#define		I2C_HOLD		 1

RAM_START       		EQU	00020h
RAM_END         		EQU	0016Fh
RAM_BANKS       		EQU	00003h
BANK0_START     		EQU	00020h
BANK0_END       		EQU	0007Fh
BANK1_START     		EQU	000A0h
BANK1_END       		EQU	000EFh
BANK2_START     		EQU	00120h
BANK2_END       		EQU	0016Fh
EEPROM_START    		EQU	02100h
EEPROM_END      		EQU	021FFh

; C:\PBP3\PBPPIC14.RAM     	00012	A00020	R0      VAR     WORD BANK0 SYSTEM       ' System Register
R0              		EQU	RAM_START + 000h
; C:\PBP3\PBPPIC14.RAM     	00013	A00022	R1      VAR     WORD BANK0 SYSTEM       ' System Register
R1              		EQU	RAM_START + 002h
; C:\PBP3\PBPPIC14.RAM     	00014	A00024	R2      VAR     WORD BANK0 SYSTEM       ' System Register
R2              		EQU	RAM_START + 004h
; C:\PBP3\PBPPIC14.RAM     	00015	A00026	R3      VAR     WORD BANK0 SYSTEM       ' System Register
R3              		EQU	RAM_START + 006h
; C:\PBP3\PBPPIC14.RAM     	00016	A00028	R4      VAR     WORD BANK0 SYSTEM       ' System Register
R4              		EQU	RAM_START + 008h
; C:\PBP3\PBPPIC14.RAM     	00017	A0002A	R5      VAR     WORD BANK0 SYSTEM       ' System Register
R5              		EQU	RAM_START + 00Ah
; C:\PBP3\PBPPIC14.RAM     	00018	A0002C	R6      VAR     WORD BANK0 SYSTEM       ' System Register
R6              		EQU	RAM_START + 00Ch
; C:\PBP3\PBPPIC14.RAM     	00019	A0002E	R7      VAR     WORD BANK0 SYSTEM       ' System Register
R7              		EQU	RAM_START + 00Eh
; C:\PBP3\PBPPIC14.RAM     	00020	A00030	R8      VAR     WORD BANK0 SYSTEM       ' System Register
R8              		EQU	RAM_START + 010h
; C:\PBP3\PBPPIC14.RAM     	00026	A00032	FLAGS   VAR     BYTE BANK0 SYSTEM       ' Static flags
FLAGS           		EQU	RAM_START + 012h
; C:\PBP3\PBPPIC14.RAM     	00025	A00033	GOP     VAR     BYTE BANK0 SYSTEM       ' Gen Op Parameter
GOP             		EQU	RAM_START + 013h
; C:\PBP3\PBPPIC14.RAM     	00022	A00034	RM1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Mask
RM1             		EQU	RAM_START + 014h
; C:\PBP3\PBPPIC14.RAM     	00024	A00035	RM2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Mask
RM2             		EQU	RAM_START + 015h
; C:\PBP3\PBPPIC14.RAM     	00021	A00036	RR1     VAR     BYTE BANK0 SYSTEM       ' Pin 1 Register
RR1             		EQU	RAM_START + 016h
; C:\PBP3\PBPPIC14.RAM     	00023	A00037	RR2     VAR     BYTE BANK0 SYSTEM       ' Pin 2 Register
RR2             		EQU	RAM_START + 017h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00137	A00038	ADR         VAR word        ' ADC conversion result
_ADR             		EQU	RAM_START + 018h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00117	A0003A	Ch0res	     VAR word
_Ch0res          		EQU	RAM_START + 01Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00118	A0003C	Ch1res	     VAR word
_Ch1res          		EQU	RAM_START + 01Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00119	A0003E	Ch2res 	     VAR word
_Ch2res          		EQU	RAM_START + 01Eh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00120	A00040	Ch3res 	     VAR word
_Ch3res          		EQU	RAM_START + 020h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00121	A00042	Ch4res 	     VAR word
_Ch4res          		EQU	RAM_START + 022h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00001	A00044	' Program: PAN3Quad
T1              		EQU	RAM_START + 024h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00001	A00046	' Program: PAN3Quad
T2              		EQU	RAM_START + 026h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00001	A00048	' Program: PAN3Quad
T3              		EQU	RAM_START + 028h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00001	A0004A	' Program: PAN3Quad
T4              		EQU	RAM_START + 02Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00123	A0004C	Word1 var word
_Word1           		EQU	RAM_START + 02Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00124	A0004E	Word2 var word
_Word2           		EQU	RAM_START + 02Eh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00125	A00050	Word3 var word
_Word3           		EQU	RAM_START + 030h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00126	A00052	Word4 var word
_Word4           		EQU	RAM_START + 032h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00135	A00054	Wtemp       var word        ' general purpose word
_Wtemp           		EQU	RAM_START + 034h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00133	A00056	counter     var byte
_counter         		EQU	RAM_START + 036h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00127	A00057	d0 var byte
_d0              		EQU	RAM_START + 037h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00128	A00058	d1 var byte
_d1              		EQU	RAM_START + 038h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00129	A00059	d2 var byte
_d2              		EQU	RAM_START + 039h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00130	A0005A	d3 var byte
_d3              		EQU	RAM_START + 03Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00131	A0005B	d4 var byte
_d4              		EQU	RAM_START + 03Bh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00145	A0005C	hbamp var byte
_hbamp           		EQU	RAM_START + 03Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00147	A0005D	hbfreq1 var byte
_hbfreq1         		EQU	RAM_START + 03Dh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00143	A0005E	hbfreq2 var byte
_hbfreq2         		EQU	RAM_START + 03Eh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00141	A0005F	hbmax var byte
_hbmax           		EQU	RAM_START + 03Fh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00150	A00060	hbpic1 var byte
_hbpic1          		EQU	RAM_START + 040h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00152	A00061	hbpic2 var byte
_hbpic2          		EQU	RAM_START + 041h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00154	A00062	hbpic3 var byte
_hbpic3          		EQU	RAM_START + 042h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00156	A00063	hbpic4 var byte
_hbpic4          		EQU	RAM_START + 043h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00136	A00064	j           var Byte
_j               		EQU	RAM_START + 044h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00146	A00065	lbamp var byte
_lbamp           		EQU	RAM_START + 045h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00148	A00066	lbfreq1 var byte
_lbfreq1         		EQU	RAM_START + 046h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00144	A00067	lbfreq2 var byte
_lbfreq2         		EQU	RAM_START + 047h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00142	A00068	lbmax var byte
_lbmax           		EQU	RAM_START + 048h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00151	A00069	lbpic1 var byte
_lbpic1          		EQU	RAM_START + 049h
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00153	A0006A	lbpic2 var byte
_lbpic2          		EQU	RAM_START + 04Ah
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00155	A0006B	lbpic3 var byte
_lbpic3          		EQU	RAM_START + 04Bh
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00157	A0006C	lbpic4 var byte
_lbpic4          		EQU	RAM_START + 04Ch
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00134	A0006D	N           var byte        ' number of repeated 10bit AD reads
_N               		EQU	RAM_START + 04Dh
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00145	PORTL   VAR     PORTA
_PORTL           		EQU	 PORTA
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00146	PORTH   VAR     PORTC
_PORTH           		EQU	 PORTC
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00147	TRISL   VAR     TRISA
_TRISL           		EQU	 TRISA
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00148	TRISH   VAR     TRISC
_TRISH           		EQU	 TRISC
_ADR??HIGHBYTE   		EQU	_ADR + 001h
_ADR??LOWBYTE    		EQU	_ADR
#define _MUX1            	_PORTA??3
#define _Data_Out        	_PORTA??2
#define _Shift_Out       	_PORTC??2
#define _SCL             	_PORTC??4
#define _SDA             	_PORTC??5
#define _SO              	_PORTA??5
#define _TRISA??3        	 TRISA, 003h
#define _ANSEL??6        	 ANSEL, 006h
#define _TRISC??2        	 TRISC, 002h
#define _TRISA??2        	 TRISA, 002h
#define _PORTA??3        	 PORTA, 003h
#define _PORTA??2        	 PORTA, 002h
#define _PORTC??2        	 PORTC, 002h
#define _ADCON0??0       	 ADCON0, 000h
#define _ADCON1??6       	 ADCON1, 006h
#define _ADCON1??5       	 ADCON1, 005h
#define _ADCON1??4       	 ADCON1, 004h
#define _ADCON0??6       	 ADCON0, 006h
#define _ADCON0??7       	 ADCON0, 007h
#define _CMCON0??0       	 CMCON0, 000h
#define _CMCON0??1       	 CMCON0, 001h
#define _CMCON0??2       	 CMCON0, 002h
#define _TRISA??0        	 TRISA, 000h
#define _ANSEL??0        	 ANSEL, 000h
#define _TRISA??1        	 TRISA, 001h
#define _ANSEL??1        	 ANSEL, 001h
#define _TRISC??3        	 TRISC, 003h
#define _ANSEL??7        	 ANSEL, 007h
#define _TRISA??4        	 TRISA, 004h
#define _ANSEL??3        	 ANSEL, 003h
#define _TRISC??0        	 TRISC, 000h
#define _ANSEL??4        	 ANSEL, 004h
#define _PORTC??4        	 PORTC, 004h
#define _PORTC??5        	 PORTC, 005h
#define _TRISA??5        	 TRISA, 005h
#define _PORTA??5        	 PORTA, 005h
#define _ADCON0??4       	 ADCON0, 004h
#define _ADCON0??3       	 ADCON0, 003h
#define _ADCON0??2       	 ADCON0, 002h
#define _ADCON0??1       	 ADCON0, 001h

; Constants.
_I2COMB          		EQU	00006h
_I2CSO2          		EQU	0000Ah
_I2CACC          		EQU	0000Eh
_I2CCHA          		EQU	00012h
_I2CGEI          		EQU	00016h
_I2CCLO          		EQU	00012h
_I2COXF          		EQU	00016h
	INCLUDE	"PAN3QUAD_JAMES.MAC"
	INCLUDE	"C:\PBP3\PBPPIC14.LIB"


; C:\PBP3\DEVICES\PIC16F688.PBPINC	00036	#HEADER
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00061	#CONFIG
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00135	BANK0   $0020, $007F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00136	BANK1   $00A0, $00EF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00137	BANK2   $0120, $016F
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00139	EEPROM  $2100, $21FF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00141	    #ERROR "-n option (PBPL) is not supported for this device."
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00142	#ENDIF
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00143	LIBRARY "PBPPIC14"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00144	DEFINE  CODE_SIZE 4

; C:\PBP3\DEVICES\PIC16F688.PBPINC	00149	include "PBPPIC14.RAM"
; C:\PBP3\DEVICES\PIC16F688.PBPINC	00153	#HEADER
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00028	#CONFIG
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00034	DEFINE I2C_HOLD 1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00040	TRISA.3=1         ' set RA3 as an input [MUX1]
	MOVE?CT	001h, _TRISA??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00042	ANSEL.6=0          'make RC2 a digital i/o (rather than AN6 input)
	MOVE?CT	000h, _ANSEL??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00043	TRISC.2=0         ' set RC2 as an output [ShiftOut]
	MOVE?CT	000h, _TRISC??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00045	TRISA.2=0         ' set RA2 as an output [DataOut]
	MOVE?CT	000h, _TRISA??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00057	ADCON0.0=1          ' internal AtoD on
	MOVE?CT	001h, _ADCON0??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00059	ADCON1.6=1          ' set AtoD clock time to Fosc/16 (101 on bits 6,5,6)
	MOVE?CT	001h, _ADCON1??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00060	ADCON1.5=0
	MOVE?CT	000h, _ADCON1??5

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00061	ADCON1.4=1        
	MOVE?CT	001h, _ADCON1??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00063	ADCON0.6=0          ' use VDD supply as AtoD reference voltage
	MOVE?CT	000h, _ADCON0??6

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00064	ADCON0.7=1          ' right justified
	MOVE?CT	001h, _ADCON0??7

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00068	CMCON0.0=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00069	CMCON0.1=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00070	CMCON0.2=0         ' lines needed for 16F688
	MOVE?CT	000h, _CMCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00073	TRISA.0=1           ' make RA0 operate as an input
	MOVE?CT	001h, _TRISA??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00074	ANSEL.0=1           ' select analogue input mode
	MOVE?CT	001h, _ANSEL??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00076	TRISA.1=1           ' make RA1 operate as an input
	MOVE?CT	001h, _TRISA??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00077	ANSEL.1=1           ' select analogue input mode
	MOVE?CT	001h, _ANSEL??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00079	TRISC.3=1           ' make RC3 operate as an input
	MOVE?CT	001h, _TRISC??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00080	ANSEL.7=1
	MOVE?CT	001h, _ANSEL??7

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00082	TRISA.4=1           ' make RA4 operate as an input
	MOVE?CT	001h, _TRISA??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00083	ANSEL.3=1
	MOVE?CT	001h, _ANSEL??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00085	TRISC.0=1           ' make RC0 operate as an input
	MOVE?CT	001h, _TRISC??0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00086	ANSEL.4=1
	MOVE?CT	001h, _ANSEL??4
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00098	I2COMB con 6         ' OMB address = 3      In Arduino code = 3
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00099	I2CSO2 con 10        ' SO2 address = 5      In slave code = 11
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00100	I2CACC con 14        ' ACC address = 7      In slave code = 15
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00101	I2CCHA con 18        ' CHA address = 9      In slave code = 19
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00102	I2CGEI con 22        ' GEI address = 11     In slave code = 23  
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00103	I2CCLO con 18        ' CLO address = 13     In slave code = 27
; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00104	I2COXF con 22        ' OXF address = 15     In slave code = 31

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00110	TRISA.5=0           ' make RA5 a (digital) output
	MOVE?CT	000h, _TRISA??5

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00164	HIGH SO
	HIGH?T	_SO

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00165	low Shift_out		' Output initially low
	LOW?T	_Shift_Out

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00166	pause 1000	        ' Allow for power up
	PAUSE?C	003E8h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00168	COUNTER=1
	MOVE?CB	001h, _counter

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00170	Again:			' Main loop.

	LABEL?L	_Again	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00171	LOW SO
	LOW?T	_SO

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00173	scan:	If MUX1 = 0 then go

	LABEL?L	_scan	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00173	scan:	If MUX1 = 0 then go
	CMPEQ?TCL	_MUX1, 000h, _go

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00174		Pause 5			' Pulse width of MUX1 is nominally 8ms so wait 5ms
	PAUSE?C	005h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00175		goto scan		' to detect beginning of pulse
	GOTO?L	_scan

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00176	go:	pause 18		' Wait 18ms. Total synch period of 18ms completed

	LABEL?L	_go	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00176	go:	pause 18		' Wait 18ms. Total synch period of 18ms completed
	PAUSE?C	012h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00178	pause 200   'this wait is needed for launches - reduce if more code executed (when synced with radiosonde)
	PAUSE?C	0C8h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00190	N=16
	MOVE?CB	010h, _N

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00192	ADCON0.4=0          ' select channel AN0 (000 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00193	ADCON0.3=0
	MOVE?CT	000h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00194	ADCON0.2=0
	MOVE?CT	000h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00195	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00196	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00197	Ch0res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00199	ADCON0.4=0          ' select channel AN1 (001 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00200	ADCON0.3=0
	MOVE?CT	000h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00201	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00202	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00203	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00204	Ch1res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00206	ADCON0.4=1          ' select channel AN7 (111 on bits 4,3,2)  
	MOVE?CT	001h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00207	ADCON0.3=1
	MOVE?CT	001h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00208	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00209	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00210	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00211	Ch2res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch2res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00213	ADCON0.4=0          ' select channel AN3 (011 on bits 4,3,2)  
	MOVE?CT	000h, _ADCON0??4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00214	ADCON0.3=1
	MOVE?CT	001h, _ADCON0??3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00215	ADCON0.2=1
	MOVE?CT	001h, _ADCON0??2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00216	pause 1
	PAUSE?C	001h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00217	gosub RepeatAD 
	GOSUB?L	_RepeatAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00218	Ch3res=ADR/4
	DIV?WCW	_ADR, 004h, _Ch3res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00229	I2CREAD SDA, SCL, I2COMB, [hbamp, lbamp, hbmax, lbmax, hbfreq1, lbfreq1, hbfreq2, lbfreq2]
	I2CDATA?T	_SDA
	I2CCLOCK?T	_SCL
	I2CWRITE?C	_I2COMB
	I2CREAD?B	_hbamp
	I2CREAD?B	_lbamp
	I2CREAD?B	_hbmax
	I2CREAD?B	_lbmax
	I2CREAD?B	_hbfreq1
	I2CREAD?B	_lbfreq1
	I2CREAD?B	_hbfreq2
	I2CREADS?B	_lbfreq2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00234	Ch4res=lbfreq1+(256*hbfreq1)
	MUL?CBW	00100h, _hbfreq1, T1
	ADD?BWW	_lbfreq1, T1, _Ch4res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00304	COUNTER=COUNTER+1   ' ready for next loop
	ADD?BCB	_counter, 001h, _counter

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00310	Wtemp=Ch0res
	MOVE?WW	_Ch0res, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00311	gosub ScaleProtect
	GOSUB?L	_ScaleProtect

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00312	Ch0res=Wtemp
	MOVE?WW	_Wtemp, _Ch0res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00314	Wtemp=Ch1res
	MOVE?WW	_Ch1res, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00315	gosub ScaleProtect
	GOSUB?L	_ScaleProtect

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00316	Ch1res=Wtemp
	MOVE?WW	_Wtemp, _Ch1res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00318	Wtemp=Ch2res
	MOVE?WW	_Ch2res, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00319	gosub ScaleProtect
	GOSUB?L	_ScaleProtect

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00320	Ch2res=Wtemp
	MOVE?WW	_Wtemp, _Ch2res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00322	Wtemp=Ch3res
	MOVE?WW	_Ch3res, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00323	gosub ScaleProtect
	GOSUB?L	_ScaleProtect

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00324	Ch3res=Wtemp
	MOVE?WW	_Wtemp, _Ch3res

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00335	d4=ch0res dig 3
	DIG?WCB	_Ch0res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00336	d3=ch0res dig 2
	DIG?WCB	_Ch0res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00337	d2=ch0res dig 1
	DIG?WCB	_Ch0res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00338	d1=ch0res dig 0
	DIG?WCB	_Ch0res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00339	d0=ch4res dig 3
	DIG?WCB	_Ch4res, 003h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00340	Word1=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00343	d4=ch1res dig 3
	DIG?WCB	_Ch1res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00344	d3=ch1res dig 2
	DIG?WCB	_Ch1res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00345	d2=ch1res dig 1
	DIG?WCB	_Ch1res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00346	d1=ch1res dig 0
	DIG?WCB	_Ch1res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00347	d0=ch4res dig 2
	DIG?WCB	_Ch4res, 002h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00348	Word2=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00351	d4=ch2res dig 3
	DIG?WCB	_Ch2res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00352	d3=ch2res dig 2
	DIG?WCB	_Ch2res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00353	d2=ch2res dig 1
	DIG?WCB	_Ch2res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00354	d1=ch2res dig 0
	DIG?WCB	_Ch2res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00355	d0=ch4res dig 1
	DIG?WCB	_Ch4res, 001h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00356	Word3=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00359	d4=ch3res dig 3
	DIG?WCB	_Ch3res, 003h, _d4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00360	d3=ch3res dig 2
	DIG?WCB	_Ch3res, 002h, _d3

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00361	d2=ch3res dig 1
	DIG?WCB	_Ch3res, 001h, _d2

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00362	d1=ch3res dig 0
	DIG?WCB	_Ch3res, 000h, _d1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00363	d0=ch4res dig 0
	DIG?WCB	_Ch4res, 000h, _d0

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00364	Word4=10000+(d4*10000)+(d3*1000)+(d2*100)+(d1*10)+d0
	MUL?BCW	_d4, 02710h, T1
	ADD?CWW	02710h, T1, T1
	MUL?BCW	_d3, 003E8h, T2
	ADD?WWW	T1, T2, T2
	MUL?BCW	_d2, 064h, T3
	ADD?WWW	T2, T3, T3
	MUL?BCW	_d1, 00Ah, T4
	ADD?WWW	T3, T4, T4
	ADD?WBW	T4, _d0, _Word4

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00368	Shiftout data_out, shift_out, 1,[Word1\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word1, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00369	Shiftout data_out, shift_out, 1,[word2\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word2, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00370	Shiftout data_out, shift_out, 1,[Word3\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word3, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00371	Shiftout data_out, shift_out, 1,[Word4\16]
	SHIFTDATA?T	_Data_Out
	SHIFTCLOCK?T	_Shift_Out
	SHIFTMODE?C	001h
	SHIFTOUT?WC	_Word4, 010h

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00376	serout SO,2,["UU",#Ch0res,",",#Ch0res,",",#Ch1res,",",#Ch2res,",",#Ch3res,",",#Ch4res,10]
	SERPIN?T	_SO
	SERMODE?C	002h
	SEROUT?C	055h
	SEROUT?C	055h
	SEROUTD?W	_Ch0res
	SEROUT?C	02Ch
	SEROUTD?W	_Ch0res
	SEROUT?C	02Ch
	SEROUTD?W	_Ch1res
	SEROUT?C	02Ch
	SEROUTD?W	_Ch2res
	SEROUT?C	02Ch
	SEROUTD?W	_Ch3res
	SEROUT?C	02Ch
	SEROUTD?W	_Ch4res
	SEROUT?C	00Ah

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00379	goto again		    ' repeat ad infinitum
	GOTO?L	_Again

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00388	RepeatAD:

	LABEL?L	_RepeatAD	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00389	Wtemp=0
	MOVE?CW	000h, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00390	    GOSUB ReadAD        ' dummy read
	GOSUB?L	_ReadAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00391	for j=1 to N
	MOVE?CB	001h, _j
	LABEL?L	L00001	
	CMPGT?BBL	_j, _N, L00002

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00392	    GOSUB ReadAD        ' read AtoD
	GOSUB?L	_ReadAD

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00393	    Wtemp=Wtemp+ADR     ' sum up values obtained
	ADD?WWW	_Wtemp, _ADR, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00394	    next j
	NEXT?BCL	_j, 001h, L00001
	LABEL?L	L00002	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00395	ADR=Wtemp
	MOVE?WW	_Wtemp, _ADR

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00396	return
	RETURN?	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00404	ReadAD:                         ' subroutine to read ADC for SELECTED channel

	LABEL?L	_ReadAD	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00406	    ADR=0
	MOVE?CW	000h, _ADR

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00407	    ADCON0.1=1                  ' starts conversion
	MOVE?CT	001h, _ADCON0??1

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00409	    while ADCON0.1=1: WEND
	LABEL?L	L00003	
	CMPNE?TCL	_ADCON0??1, 001h, L00004

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00409	    while ADCON0.1=1: WEND
	GOTO?L	L00003
	LABEL?L	L00004	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00411	    ADR.highbyte = ADRESH       ' transfer low and high bytes to ADR
	MOVE?BB	ADRESH, _ADR??HIGHBYTE

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00412	    ADR.LOWBYTE = ADRESL
	MOVE?BB	ADRESL, _ADR??LOWBYTE

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00413	RETURN
	RETURN?	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00418	ScaleProtect:

	LABEL?L	_ScaleProtect	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00421	while (Wtemp>4096)
	LABEL?L	L00005	
	CMPLE?WCL	_Wtemp, 01000h, L00006

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00422	Wtemp=Wtemp/2
	DIV?WCW	_Wtemp, 002h, _Wtemp

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00423	wend
	GOTO?L	L00005
	LABEL?L	L00006	

; C:\USERS\TH863480\DOCUMENTS\DEVELOPEMENT\PANDORA\VERSION1\PAN3QUAD_JAMES.PBP	00424	return
	RETURN?	

	END
